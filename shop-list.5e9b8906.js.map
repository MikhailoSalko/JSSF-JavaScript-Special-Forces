{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-3deee1b0507f1b61.js","src/js/shop-list-books.js","node_modules/@parcel/runtime-js/lib/runtime-4e68c2867f319581.js","node_modules/@parcel/runtime-js/lib/runtime-d633a9e401d123bd.js","node_modules/@parcel/runtime-js/lib/runtime-34e91b7e31e9dc03.js","node_modules/@parcel/runtime-js/lib/runtime-5514423de0805456.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"e7GzJ\\\":\\\"shop-list.5e9b8906.js\\\",\\\"1w34Y\\\":\\\"amazon-link_2x.88450da7.png\\\",\\\"iITAK\\\":\\\"books-link_2x.b396e612.png\\\",\\\"gqoTZ\\\":\\\"book-shop-link_2x.4495e777.png\\\",\\\"beSG4\\\":\\\"Icon.a7d4f1fa.svg\\\"}\"));","// import sprite from \"../images/icons.svg\"\nimport { currentPageSwitcher } from './current-page-switcher';\nconst currentPage = document.querySelector('.shop-mob');\ncurrentPageSwitcher(currentPage);\n\nconst bookListEl = document.querySelector('.shoplist-main');\nconst shopIsEmpty = document.querySelector('.shoplist-empty');\nconst sectionTitle = document.querySelector('.shoplist-title');\n\nlet booksInShop = JSON.parse(localStorage.getItem('books')) ?? [];\n\nlet activePage = 1;\nconst pageSize = 3;\n\nconst renderBooks = arr => {\n  const markup = arr\n    .map(book => {\n      if (window.matchMedia('(max-width: 376px)').matches) {\n        return `<li><div class=\"shoplist-book-card\" id=${book._id}>\n        <button type=\"button\" class=\"shoplist-delete-book-btn\">\n        <img src=${new URL(\n          '../images/shopping-list/Icon.svg',\n\n          import.meta.url\n        )} class=\"shoplist-delete-book-icon\" alt=\"Delete book\" width=\"15\" height=\"15\" />\n        </button>\n        <div class=\"shoplist-book-card-top\">\n        <div><img class=\"shoplist-book-cover\" src=${\n          book.book_image\n        } alt=\"book cover\" width=${book.book_image_width} height=${\n          book.book_image_height\n        }/>\n        <p class=\"shoplist-book-author\">${book.author}</p></div>\n        <div><p class=\"shoplist-book-title\">${book.title}</p>\n        <p class=\"shoplist-book-category\">${book.list_name}</p>\n        <div class=\"shops-logo\"><a href=${\n          book.buy_links[0].url\n        } class=\"shoplist-buy-link\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"Amazon\">\n        <img src=${new URL(\n          '../images/shopping-list/amazon-link_2x.png',\n          import.meta.url\n        )} class=\"shop-logo amazon\" width=\"48\" height=\"15\" alt=\"Amazon\" />\n        </a>\n        <a href=${\n          book.buy_links[1].url\n        } class=\"shoplist-buy-link\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"Apple Books\">\n        <img src=${new URL(\n          '../images/shopping-list/books-link_2x.png',\n          import.meta.url\n        )} class=\"shop-logo apple-books\" width=\"28\" height=\"27\" alt=\"Apple Books\" />\n        </a>\n        <a href=${\n          book.buy_links[4].url\n        } class=\"shoplist-buy-link\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"Book Shop\">\n        <img src=${new URL(\n          '../images/shopping-list/book-shop-link_2x.png',\n          import.meta.url\n        )} class=\"shop-logo book-shop\" width=\"32\" height=\"30\" alt=\"Book Shop\" />\n        </a></div></div></div>\n        <p class=\"shoplist-book-description\">${book.description}</p>\n      </div></li>`;\n      } else {\n        return `<li><div class=\"shoplist-book-card\" id=${book._id}>\n        <button type=\"button\" class=\"shoplist-delete-book-btn\">\n          <img src=${new URL(\n            '../images/shopping-list/Icon.svg',\n            import.meta.url\n          )} class=\"shoplist-delete-book-icon\" alt=\"Delete book\" width=\"14\" height=\"14\" />\n        </button>\n        <div><img class=\"shoplist-book-cover\" src=${\n          book.book_image\n        } alt=\"book cover\" width=${book.book_image_width} height=${\n          book.book_image_height\n        }/></div>\n        <div><p class=\"shoplist-book-title\">${book.title}</p>\n        <p class=\"shoplist-book-category\">${book.list_name}</p>\n        <p class=\"shoplist-book-description\">${book.description}</p>\n        <p class=\"shoplist-book-author\">${book.author}</p>\n        </div>\n        <div class=\"shops-logo\"><a href=${\n          book.buy_links[0].url\n        } class=\"shoplist-buy-link\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"Amazon\">\n        <img src=${new URL(\n          '../images/shopping-list/amazon-link_2x.png',\n          import.meta.url\n        )} class=\"shop-logo amazon\" width=\"48\" height=\"15\" alt=\"Amazon\" />\n        </a>\n        <a href=${\n          book.buy_links[1].url\n        } class=\"shoplist-buy-link\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"Apple Books\">\n        <img src=${new URL(\n          '../images/shopping-list/books-link_2x.png',\n          import.meta.url\n        )} class=\"shop-logo apple-books\" width=\"28\" height=\"27\" alt=\"Apple Books\" />\n        </a>\n        <a href=${\n          book.buy_links[4].url\n        } class=\"shoplist-buy-link\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"Book Shop\">\n        <img src=${new URL(\n          '../images/shopping-list/book-shop-link_2x.png',\n          import.meta.url\n        )} class=\"shop-logo book-shop\" width=\"32\" height=\"30\" alt=\"Book Shop\" />\n        </a></div>\n      </div></li>`;\n      }\n    })\n    .join('');\n\n  shopIsEmpty.innerHTML = '';\n  bookListEl.innerHTML = markup;\n  sectionTitle.classList.add('title-when-books');\n};\n\nconst displayData = (arr, startIndex) => {\n  const pageData = arr.slice(startIndex, startIndex + pageSize);\n  renderBooks(pageData);\n};\n\nif (booksInShop.length > 0) {\n  window.onload = function () {\n    renderBooks(booksInShop.slice(0, pageSize));\n  };\n  window.onresize = function () {\n    renderBooks(booksInShop.slice(0, pageSize));\n  };\n} else if (booksInShop.length === 0) {\n  shopIsEmpty.innerHTML = `<p class=\"information-text\">\n        This page is empty, add some books and proceed to order.\n      </p>\n      <div class=\"book_img\"></div>`;\n}\n\nconst deleteBook = id => {\n  const books = JSON.parse(localStorage.getItem('books'));\n  const updatedBooks = books.filter(book => book._id !== id);\n  localStorage.setItem('books', JSON.stringify(updatedBooks));\n  if (updatedBooks.length === 0) {\n    shopIsEmpty.innerHTML = `<p class=\"information-text\">\n      This page is empty, add some books and proceed to order.\n    </p>\n    <div class=\"book_img\"></div>`;\n    bookListEl.innerHTML = '';\n    sectionTitle.classList.remove('title-when-books');\n  } else {\n    if (updatedBooks.length % pageSize === 0) {\n      activePage -= 1;\n    }\n\n    const books = updatedBooks.slice(\n      (activePage - 1) * pageSize,\n      activePage * pageSize\n    );\n\n    renderBooks(books);\n  }\n\n  displayPagination();\n};\n\nbookListEl.addEventListener('click', event => {\n  if (\n    event.target.classList.contains('shoplist-delete-book-icon') ||\n    event.target.classList.contains('shoplist-delete-book-btn')\n  ) {\n    const bookCard = event.target.closest('.shoplist-book-card');\n    const bookId = bookCard.getAttribute('id');\n    deleteBook(bookId);\n  }\n});\n\n// \\/------- pagination ------\\/\nconst sectionShoplist = document.querySelector('.shoplist');\nconst heading = document.createElement('div');\nheading.className = 'pagination-container';\nsectionShoplist.append(heading);\n\n// const pageSize = 3;\n// let activePage = 1;\nlet totalPages = Math.ceil(booksInShop.length / pageSize);\n\nconst displayPagination = () => {\n  const books = JSON.parse(localStorage.getItem('books')) ?? [];\n\n  const containerPagination = document.querySelector('.pagination-container');\n  containerPagination.innerHTML = '';\n\n  if (books.length <= pageSize) return;\n\n  const firstPage = document.createElement('button');\n  firstPage.className = 'button-pagination symbols';\n\n  firstPage.innerHTML = '&#171;';\n  firstPage.disabled = activePage === 1;\n  firstPage.addEventListener('click', () => {\n    activePage = 1;\n    displayData(books, 0);\n    displayPagination();\n  });\n  containerPagination.appendChild(firstPage);\n\n  const prevPage = document.createElement('button');\n  prevPage.className = 'button-pagination symbols';\n  prevPage.innerHTML = '&#8249;';\n  prevPage.disabled = activePage === 1;\n  prevPage.addEventListener('click', () => {\n    activePage--;\n    const startIndex = (activePage - 1) * pageSize;\n    displayData(books, startIndex);\n    displayPagination();\n  });\n  containerPagination.appendChild(prevPage);\n\n  let startPage =\n    activePage <= 2\n      ? 1\n      : activePage >= totalPages - 1\n      ? totalPages - 2\n      : activePage - 1;\n\n  const dotsStart = startPage > 1;\n  if (dotsStart) {\n    const dots = document.createElement('button');\n    dots.className = 'button-pagination';\n    dots.innerHTML = '&#8230;';\n    containerPagination.appendChild(dots);\n  }\n\n  for (let i = startPage; i < startPage + 3 && i <= totalPages; i++) {\n    const page = document.createElement('button');\n    page.className = 'button-pagination';\n    page.innerHTML = i;\n    page.disabled = i === activePage;\n    page.classList.toggle('active', i === activePage);\n    page.addEventListener('click', () => {\n      activePage = i;\n      const startIndex = (activePage - 1) * pageSize;\n      displayData(books, startIndex);\n      displayPagination();\n    });\n    containerPagination.appendChild(page);\n  }\n\n  const dotsEnd = startPage + 2 < totalPages;\n  if (dotsEnd) {\n    const dots = document.createElement('button');\n    dots.className = 'button-pagination';\n    const dotsEnd = startPage + 2 < totalPages;\n    if (dotsEnd) {\n      const dots = document.createElement('button');\n      dots.className = 'button-pagination';\n      dots.innerHTML = '&#8230;';\n      containerPagination.appendChild(dots);\n    }\n\n    const nextPage = document.createElement('button');\n    nextPage.className = 'button-pagination symbols';\n    nextPage.innerHTML = '&#8250;';\n    nextPage.disabled = activePage === totalPages;\n    nextPage.addEventListener('click', () => {\n      activePage++;\n      const startIndex = (activePage - 1) * pageSize;\n      displayData(books, startIndex);\n      displayPagination();\n    });\n    containerPagination.appendChild(nextPage);\n\n    const lastPage = document.createElement('button');\n    lastPage.className = 'button-pagination symbols';\n    lastPage.innerHTML = '&#187;';\n    lastPage.disabled = activePage === totalPages;\n    lastPage.addEventListener('click', () => {\n      activePage = totalPages;\n      const startIndex = (totalPages - 1) * pageSize;\n      displayData(books, startIndex);\n      displayPagination();\n    });\n    containerPagination.appendChild(lastPage);\n  }\n};\n\ndisplayPagination();\n\n// /\\------- pagination ------/\\\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"beSG4\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"1w34Y\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"iITAK\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"gqoTZ\")).toString();"],"names":["parcelRequire","register","JSON","parse","$67vkq","$b8f0a8f221bf2fe4$var$currentPage","document","querySelector","currentPageSwitcher","$b8f0a8f221bf2fe4$var$bookListEl","$b8f0a8f221bf2fe4$var$shopIsEmpty","$b8f0a8f221bf2fe4$var$sectionTitle","$b8f0a8f221bf2fe4$var$booksInShop","localStorage","getItem","$b8f0a8f221bf2fe4$var$activePage","$6b49fd3e0ac86bb8$exports","URL","resolve","url","toString","$dee5b1c8ae6aec69$exports","$8bb055345a68d1e0$exports","$743fc259d0c2283a$exports","$b8f0a8f221bf2fe4$var$renderBooks","arr","markup","map","book","window","matchMedia","matches","_id","book_image","book_image_width","book_image_height","author","title","list_name","buy_links","description","join","innerHTML","classList","add","$b8f0a8f221bf2fe4$var$displayData","startIndex","pageData","slice","length","onload","onresize","addEventListener","event","target","contains","id","updatedBooks","filter","setItem","stringify","remove","books","$b8f0a8f221bf2fe4$var$displayPagination","$b8f0a8f221bf2fe4$var$deleteBook","closest","getAttribute","$b8f0a8f221bf2fe4$var$sectionShoplist","$b8f0a8f221bf2fe4$var$heading","createElement","className","append","$b8f0a8f221bf2fe4$var$totalPages","Math","ceil","containerPagination","firstPage","disabled","appendChild","prevPage","startPage","dots","i","page","toggle","nextPage","lastPage"],"version":3,"file":"shop-list.5e9b8906.js.map"}